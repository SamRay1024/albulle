:: Albulle - Lisez moi
:: Version 0.9.2
:: Auteur : SamRay1024
:: http://jebulle.net - http://forums.jebulle.net
:: webmaster@jebulle.net

// Encodage du fichier : ISO-8859-1 (8 bits)
// Fin de ligne : CR + LF


SOMMAIRE
--------

	* REMERCIEMENTS
	* INTRODUCTION
	* CONFIGURATION REQUISE
	* AVERTISSEMENT (Si vous ne devez lire qu'un seul paragraphe, lisez celui-là !)
	* MISE-A-JOUR DEPUIS LA VERSION PRECEDENTE
	* INSTALLATION
	* PARAMETRAGE DU PROGRAMME
	* REDEFINIR SON PROPRE CLASSEMENT
	* UTILISATION D'ALBULLE EN CENTRE DE TELECHARGEMENT
	* INTEGRER ALBULLE DANS UN SITE INTERNET
	* CHANGER LE STYLE DE LA PAGE
	* PROBLEMES CONNUS
	* AUTRES QUESTIONS
	

REMERCIEMENTS
-------------

	Je remercie pour leur aide précieuse au développement d'Albulle
les personnes suivantes :

	- CyberBob002 - http://lecyber.net - pour son temps en sa qualité de 
		conseiller, bêta testeur...et ami ;-)

	- Olivier Matheret pour la réalisation de la classe qui permet de générer
		des archives à la volée et son applet Java qui offre une solution
		alternative pour les personnes qui sont chez Free et pour lesquelles
		la génération à la volée n'est pas possible.
		(-> http://matheret.free.fr)

	- Ainsi que tous les visiteurs et autres membres du forum qui proposent 
		des suggestions, rapportent les erreurs qu'ils peuvent rencontrer...
		qui se reconnaîtront ;-).


INTRODUCTION
------------

	Albulle est une galerie photo basée sur la classe PanierDeFichiers
que vous pouvez trouvez sur le site. Albulle permet l'exploration de 
dossiers dans lesquels vous pouvez classer vos photos.

	Le script gère automatiquement la création des miniatures des photos
que vous ajoutez dans vos albums et supporte les 3 formats que sont :
GIF, JPEG et PNG.

	Albulle propose un panier dans lequel vous pouvez ajouter des photos
au grès de votre navigation dans les albums. Lorsque votre sélection est
terminée, vous pouvez alors la télecharger directement via une archive au
format de compression ZIP. Il ne vous reste plus qu'à la décompresser pour
profiter de ces photos sur votre ordinateur !


CONFIGURATION REQUISE
---------------------

	Vous devez, pour pouvoir utiliser Albulle, disposer d'un serveur web qui
permette l'exécution de code PHP. Ce serveur web doit avoir les caractéristiques
suivantes :

	- PHP version 4.1.x,
	- Extension GD active sur le serveur PHP (pour le traitement des images),
	- Extension zlib active (pour l'utilisation du panier d'images).
	
	Aucune base de données n'est nécessaire pour l'utilisation d'Albulle.

	Indépendament de la configuration serveur, préférez l'utilisation d'un autre
navigateur que Internet Explorer...comme FireFox ;-). Albulle est prévu pour s'afficher
relativement correctement sous IE, mais ce n'est pas terrible : l'utilisation de gif à la
place des png pour avoir la transparence rend ces images de piètre qualité (256 couleurs
ça fait juste pour avoir des belles icones/images) même si c'est toujours mieux
que de ne pas avoir de transparence du tout. Invitez donc vos utilisateurs à utiliser
FireFox (ou Flock, ou Opéra, ou un autre !).


AVERTISSEMENT
-------------

	Tous les fichiers php que vous trouverez dans ce projet sont encodés au
format UTF-8. Ainsi, VOUS NE DEVEZ EN AUCUN CAS LES EDITER AUTREMENT QU'EN
UTF-8 ! Si par mégarde vous en ouvrez un, ne l'enregistrez pas tant que votre
logiciel n'a pas été configuré pour enregistrer ses fichiers dans ce format ;
vous risquer d'endommager les fichiers et d'avoir alors des erreurs lors de
leur exécution.

	DE PLUS, en raison de disparités dans le format UTF-8, tous les éditeurs
ne sont pas recommandés pour effectuer cette tâche (le format UTF-8 est décliné
en deux versions, dont l'une ne convient pas aux serveurs PHP et peut provoquer
des erreurs). Les éditeurs que je vous recommande sont les suivants :

	- Unired : http://unired.sourceforge.net/, pour Windows uniquement.
	- Jext : http://jext.sourceforge.net/, multi plates-formes (écrit en Java).
	- Scite : http://www.scintilla.org/, linux et Windows (mon préféré ;-)).
		Attention : avec Scite, deux formats d'encodage UTF-8 sont disponibles !
			L'UTF-8 et l'UTF-8 Cookie. C'est ce dernier que vous devrez
			utiliser pour éditer correctement les fichiers, car l'autre
			ajoute un caractère non visible en tout début de fichier.
	- Vim : http://www.vim.org/, multi plates-formes.
	- Emacs : http://www.gnu.org/software/emacs/, multi plates-formes.
	
	(Pour les plus curieux d'entres vous, voici un explication beaucoup plus
complète que ces quelques lignes que je viens d'écrire : 
http://openweb.eu.org/articles/jeux_caracteres/ )


MISE-A-JOUR DEPUIS LA VERSION PRECEDENTE
----------------------------------------

* Vous utilisez actuellement une version <= 0.8 :

	Cette version 0.9 ayant subi de profonds changements il est obligatoire de supprimer
	intégralement votre ancienne installation. Vous devez aussi supprimer les dossiers
	miniatures présents dans votre dossier de photos vu que toutes les miniatures sont
	maintenant stockées dans un unique dossier.

* Vous utilisez actuellement la version 0.9.x :

	Fichiers à mettre à jour (chemins relatifs au dossier upload/ de l'archive) :

		/albulle/config.php
		/albulle/explore.php
		/albulle/themes/albulle/*			(Supprimez le thème et mettez le nouveau à la place)
		/albulle/includes/classes/util.class.php
		/albulle/includes/classes/url.class.php
		/albulle/includes/fonctions.php
		/albulle/includes/html.php


INSTALLATION
------------

	Voici ce que vous avez dû trouver en décompressant l'archive d'Albulle :

	/extras		-> Dossier qui contient des éléments supplémentaires pour peaufiner
				votre installation. Référez-vous aux fichiers textes présents
				dans le dossier pour avoir de plus amples informations.
	/ressources	-> Contient les sources photoshop des icones pour que vous puissiez 
				les adapter si vous modifiez votre thème
	/upload		-> Le dossier qui contient Albulle à envoyer sur votre serveur

	changelog.txt	-> Le récap de l'évolution d'Albulle depuis ses débuts.
	licence.txt	-> Le texte de la licence sous laquelle se trouve Albulle
	lisezmoi.txt	-> Ais-je vraiment besoin de le préciser ?

1/	La première chose à faire, vous l'avez déjà faite puisque vous êtes en train
de lire ces lignes, et c'est bien !

2/	La deuxième chose à faire sera de vous connecter à votre serveur Web (grâce à votre
client FTP favori) pour envoyer le contenu du dossier upload/ qui est le suivant :

	/upload
		/albulle	-> Le noyau dur ;-)
		index.php	-> l'appel du noyau dur !

3/	C'est bon ? Les fichiers sont envoyés ? Bien passons à la suite et voyons le contenu
de ce fameux noyau (je ne mets que ce qui nous intéresse, pour le détail avancé il faudra vous
reporter à la documentation orienté développeur qui sera rédigée le plus tôt possible) :

	/albulle
		/...
		/miniatures	-> Le dossier qui contiendra les miniatures
		/photos		-> Le dossier qui contiendra vos albums photos
		/...

	Toujours avec votre client FTP favori, vous allez devoir modifier les droits d'accès au
dossier miniatures/. Pour ce faire, accédez aux propriétés du dossier pour appliquer un chmod
minimum de 755 (si cela ne suffit pas, appliquez alors un chmod 777). Si vous ne faites pas
cette manipulation, Albulle vous gratifiera d'un beau message d'erreur vous disant que le dossier
miniatures/ n'est pas autorisé en écriture.

	Pour ceux qui arrivent d'une version précédente, n'oubliez pas de supprimer tous les 
dossiers des miniatures qui ont été créés dans les sous-dossiers du dossier photos/. Sinon, ils 
seront visibles dans l'arborescence.

4/	Il ne vous reste plus qu'à uploader vos dossiers de photos de vacances dans le dossier
photos/ et le tour est joué !

	/!\ Remarque importante :

!	Si, à la place des miniatures de vos photos, vous voyez une image par défaut (un rond
!	barré), c'est que les photos uploadées ont une quantité de pixels supérieure à 5,3 millions
!	de pixels. C'est une limitation interne de la librairie de gestion des images de PHP ; il
!	n'est donc pas possible de passer outre et les miniatures ne peuvent être générée.
!	L'unique solution consiste à redimensionner vos images avant de les uploader. En général,
!	les dimensions max pour une photo au format classique sont 2560 x 1920 pixels.

	Autre remarque sur l'utilisation du dossier photos/ : vous ne devez pas mettre de 
fichiers directement à la racine de photos/. Enfin, vous le pouvez mais ces photos
n'apparaîtront jamais dans l'arborescence ! Utilisez donc toujours des sous-dossiers.
	

PARAMETRAGE DU PROGRAMME
------------------------

	La configuration par défaut livrée avec Albulle ne vous convient pas ? 
Pas de problème, tout est prévu ! Le comportement d'Albulle est régi par un fichier 
de configuration qui vous permettra de paramétrer votre installation selon vos 
désirs : config.php.

	Pour trouver ce fichier, suivez le guide :

	/archive téléchargée
		/extras
		/ressources
		/upload
			/albulle
				config.php	<= il est ici !
			index.php

	Ce fichier contient toutes les explications nécessaires pour le paramètrage 
d'Albulle. Je vous invite à prendre le temps de lire les commentaires pour ne pas 
faire de fausse manipulation.


REDEFINIR SON PROPRE CLASSEMENT
-------------------------------

	Les dossiers et fichiers sont automatiquement classés par ordre alphabétique
par le système d'exploitation. Ainsi, si vous souhaitez changer cet ordre (pour
faire un classement chronologique par exemple) il vous faut surement avoir recours
à un préfixe devant les noms (Ex : 01_..., 02_..., etc). Hors vous ne souhaitez
peut-être pas que ce préfixe apparaisse dans la page d'Albulle.

	Vous pouvez, depuis la version 0.8, indiquer à Albulle que vous utilisez des
préfixes et que vous ne souhaitez pas qu'ils apparaissent !

	Une explication complète du paramètrage à effectuer se trouve directement dans
le fichier de configuration (config.php). Rassurez-vous, ce paramètrage est
extrèmement simple !


UTILISATION D'ALBULLE EN CENTRE DE TELECHARGEMENT
-------------------------------------------------

	En activant le mode "centre de téléchargement" d'Albulle, vous devez créer
un dossier du même nom que celui que vous indiquerez dans la configuration ('centre'
par défaut) à la racine d'Albulle.

	Désormais, chaque photo que vous ajouterez correspondra à un fichier que vous
mettez à disposition de vos internautes. Ce fichier devra être placé dans le dossier
'centre', devra OBLIGATOIREMENT porter le MEME NOM que le nom de la photo qui lui
est associée et être de l'extension que vous aurez défini dans la configuration.

	Donc par exemple, si vous ajoutez une photo MaPhoto_01.png dans n'importe quel 
dossier dans vos albums, vous devrez mettre dans centre/ un fichier MaPhoto_01.zip 
(Zip car c'est cette extension que j'ai pris ici, mais si vous changez, il faudra 
adapter dans le dossier).

	Pour le reste, le fonctionnement ne change pas.


INTEGRER ALBULLE DANS UN SITE INTERNET
--------------------------------------

	Rendez-vous sur le forum http://forums.jebulle.net rubrique Albulle pour lire
l'astuce qui traite ce sujet.


CHANGER LE STYLE DE LA PAGE
---------------------------

	Pour créer un nouveau thème pour Albulle, je ne saurais que vous conseiller
de prendre le thème par défaut, livré avec Albulle, d'en faire une copie au nom de
votre nouveau thème et de partir de lui.

	Je rédigerai dès que possible une documentation complète pour la création de thèmes
mais en attendant, je vous livre une présentation succinte qui vous permettra déjà d'avoir
un aperçu de la façon dont est structurée un thème.

	Voici donc la structure que vous pourrez trouvez pour le thème par défaut :

	/upload
	  /albulle
	    /themes		-> c'est ici que sont stockés les thèmes (1 dossier = 1 thème)
	      /albulle		-> Le thème par défaut
		/css		-> Ce dossier contient tous les fichiers css
		/html		-> Contient les patrons au format xhtml des éléments
					constitutifs des pages d'Albulle
		/images		-> Toutes les images du thème sont stockées là
		/js		-> Se trouvent ici les codes javascripts

		config_thm.php	-> [Facultatif] Permet de surcharger des éléments de configuration uniquement pour le thème
		html.php	-> [Facultatif] Permet de surcharger le html.php présent dans le dossier /albulle/includes/
		html_popup.php	-> [Facultatif] Idem html.php mais avec html_popup.php


	Dans les patrons XHTML vous trouverez deux choses qui n'ont rien à voir avec l'XHTML :

	* {TOTO} : ces éléments sont des pseudos-variables qui seront remplacées automatiquement
			lors de la génération des pages. Vous pouvez changer tout ce que vous 
			souhaitez dans le code xhtml, mais vous devez IMPERATIVEMENT conserver 
			ces pseudos-variables. Sinon, les informations dynamiques ne seront pas
			affichées.
			Repérez donc ces variables avant de faire des modifications et structurez
			votre code XHTML autour.

	* <!-- SI QUELQUE_CHOSE-->...<!-- FINSI QUELQUE_CHOSE-->

		Ces deux commentaires représentent un bloc conditionnel. Vous devez au même titre
		que les pseudos-variables les conserver et organiser votre code XHTML autour pour
		respecter l'ordre d'affichage des données.
		Ces blocs sont nommés ('QUELQUE_CHOSE') et reconnu par Albulle. Ils permettent d'avoir
		dans un patron des éléments qui vont être affichés ou cachés selon une condition
		donnée.

	Tout le reste n'est qu'XHTML et CSS ! Autrement dit, si vous ne comprenez rien à ce que
vous pourrez trouver dans les fichiers *.thm.php et *.css, commencez par apprendre les bases
de l'XHTML et du CSS ;-) !

	Pour vous aider dans votre intégration du script, j'ai joint à l'archive un dossier
'ressources' dans lequel vous trouverez les fichiers PSD originaux qui m'ont servit
à créer les images d'Albulle (ainsi que la police de caractère utilisée). Vous pourrez
alors repartir de ces PSD pour changer les polices de textes, ou les couleurs de fonds,
par exemple !


PROBLEMES CONNUS
----------------

1/	Il se peut que, selon le serveur sur lequel vous allez mettre Albulle, vous ayez des
problèmes avec les noms de dossiers qui comportent des accents et autres caractères spéciaux.
Cela vient du fait que chaque serveur, selon sa nature (windows, linux, mac,...), peut avoir
un encodage différent. Or, selon cet encodage, Albulle peut ne pas afficher correctement les
dossiers. Cela ne devrait normalement pas porter préjudice au fonctionnement général et ne
devrait pas empêcher la navigation.

	Pour les mêmes raisons, il se peut aussi que les accents passent mals dans l'archive que
vous générerez (selon sur quel type de machine vous ouvrirez l'archive ; chaque machine décodant
plus ou moins bien les différents charset).

	Si ce problème était bloquant chez vous (c'est-à-dire qu'une archive serait illisible car
corrompue ou que la navigation provoquerait une erreur), n'hésitez pas à vous rendre sur le
forum et signaler votre erreur ou m'ecrire un courriel.

2/	Le thème par défaut à été conçu pour être compatible avec les 3 navigateurs références
que sont Safari, Firefox et Internet Explorer. Malgré tout, il reste quelques éléments qui ne sont
pas parfaits :

	- sous IE, les calages ne sont pas parfait au niveau des vignettes et je n'arrive pas à placer
		correctement le formulaire pour le défilement automatique des images.

	- sous FireFox : RAS, tout est nickel. Je vous encourage fortement à utiliser ce
		navigateur ! (http://www.mozilla-europe.org/fr/)

	- sous Safari, il y a un souci de dimensionnement des images en mode diaporama :
		cela est du à un bogue du max-with présent dans Safari qui est déjà corrigé
		dans les nigthly bluids et qui le sera donc surement dans la prochaine version.
		Si vous êtes connaisseurs et que l'aventure vous tente, vous trouverez la version
		de développement de Safari à cette adresse : http://nightly.webkit.org/
		( /!\ réservé à ceux qui maitrisent le sujet !)
		Patience donc, un jour meilleur viendra !

	Si vous êtes pro CSS et que vous avez des corrections à apporter, n'hésitez pas, je
suis ouvert aux critiques et suggestions !


AUTRES QUESTIONS
----------------

	Si vous avez des problèmes, des questions, des suggestions, des critiques, etc, un forum
est à votre disposition à l'adresse suivante :

	http://forums.jebulle.net,
	Rubrique "Albulle".
